# Configuración mínima para Railway
DirectoryIndex cotizador.php index.php

# Forzar mostrar errores
php_flag display_errors on
php_value error_reporting E_ALL

# Permitir acceso a todos los archivos PHP
<Files "*.php">
    Order Allow,Deny
    Allow from all
</Files>

# Proteger archivos sensibles
<Files "config.php">
    Order Allow,Deny
    Deny from all
</Files>

# Headers de seguridad
<IfModule mod_headers.c>
    Header always set X-Content-Type-Options nosniff
    Header always set X-Frame-Options DENY
    Header always set X-XSS-Protection "1; mode=block"
</IfModule>

# Permitir acceso a archivos necesarios
<FilesMatch "^(config|db|functions)\.php$">
    Order Allow,Deny
    Allow from all
</FilesMatch>

# Permitir acceso a assets
<Directory "assets">
    Order Allow,Deny
    Allow from all
</Directory>

# Permitir acceso a archivos del sistema necesarios
<LocationMatch "^/sistema/(includes|assets)/">
    Order Allow,Deny
    Allow from all
</LocationMatch>

# Prevenir acceso directo a archivos del sistema excepto los necesarios
RewriteEngine On
RewriteRule ^sistema/(?!(includes|assets)/) - [F,L]

# Manejar errores
ErrorDocument 404 /index.php
ErrorDocument 500 /index.php